<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&display=swap"
    rel="stylesheet" />
  <link href="https://fonts.cdnfonts.com/css/bitsumishi" rel="stylesheet" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Vatsal Dutt's Portfolio</title>
  <link rel="icon" type="image/png" href="./img/logo.png" id="favicon">
  <script>
    // Create a favicon with the original icon slightly bigger and centered, background white, then invert all colors
    // and make the corners transparent for a border radius effect
    const favicon = document.getElementById('favicon');
    const img = document.createElement('img');
    img.crossOrigin = 'anonymous';
    img.src = favicon.href;
    img.onload = function () {
      const size = 64; // Standard favicon size
      const scale = 0.60; // Scale up to 60%
      const iconSize = size * scale;
      const offset = (size - iconSize) / 2;
      const borderRadius = 16; // Adjust for roundness

      const canvas = document.createElement('canvas');
      canvas.width = size;
      canvas.height = size;
      const ctx = canvas.getContext('2d');

      // Draw rounded rectangle path for border radius
      ctx.save();
      ctx.beginPath();
      ctx.moveTo(borderRadius, 0);
      ctx.lineTo(size - borderRadius, 0);
      ctx.quadraticCurveTo(size, 0, size, borderRadius);
      ctx.lineTo(size, size - borderRadius);
      ctx.quadraticCurveTo(size, size, size - borderRadius, size);
      ctx.lineTo(borderRadius, size);
      ctx.quadraticCurveTo(0, size, 0, size - borderRadius);
      ctx.lineTo(0, borderRadius);
      ctx.quadraticCurveTo(0, 0, borderRadius, 0);
      ctx.closePath();
      ctx.clip();

      // Fill background with white
      ctx.fillStyle = '#fff';
      ctx.fillRect(0, 0, size, size);

      // Draw the original image scaled and centered
      ctx.drawImage(img, offset, offset, iconSize, iconSize);

      ctx.restore();

      // Invert all colors (background and icon)
      const imageData = ctx.getImageData(0, 0, size, size);
      const data = imageData.data;
      for (let i = 0; i < data.length; i += 4) {
        // Only invert if pixel is not fully transparent
        if (data[i + 3] > 0) {
          data[i] = 255 - data[i];     // Red
          data[i + 1] = 255 - data[i + 1]; // Green
          data[i + 2] = 255 - data[i + 2]; // Blue
        }
        // Alpha remains unchanged
      }
      ctx.putImageData(imageData, 0, 0);

      favicon.href = canvas.toDataURL('image/png');
    };
  </script>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Open+Sans:ital,wght@0,300..800;1,300..800&display=swap"
    rel="stylesheet">
</head>

<body>

  <div id="root"></div>
  <script type="module" src="/src/main.jsx"></script>
</body>

</html>